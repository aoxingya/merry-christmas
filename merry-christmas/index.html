<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no" />
<title>Merry Christmas, ææ…§</title>

<style>
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

body {
  width: 100vw;
  height: 100vh;
  overflow: hidden;
  background: url("bg.jpg") no-repeat center center;
  background-size: cover;
  font-family: "PingFang SC", "Microsoft YaHei", sans-serif;
}

/* åŠé€æ˜é®ç½©ï¼Œä¿è¯æ–‡å­—æ¸…æ™° */
.mask {
  position: absolute;
  inset: 0;
  background: rgba(0,0,0,0.45);
  z-index: 1;
}

/* æ–‡å­—åŒºåŸŸ */
.text {
  position: absolute;
  top: 14%;
  width: 100%;
  padding: 0 24px;
  text-align: center;
  color: #fff;
  z-index: 3;
  opacity: 0;
  transition: opacity 1.5s ease;
}

.text.show {
  opacity: 1;
}

.text h1 {
  font-size: 28px;
  margin-bottom: 22px;
  color: #ffdf8a;
}

.text p {
  font-size: 15px;
  line-height: 2;
}

/* åº•éƒ¨æç¤º */
.tip {
  position: absolute;
  bottom: 28px;
  width: 100%;
  text-align: center;
  font-size: 13px;
  color: #fff;
  opacity: 0.8;
  z-index: 3;
}

/* å³ä¸‹è§’ç½²å */
.signature {
  position: absolute;
  right: 16px;
  bottom: 16px;
  font-size: 12px;
  color: rgba(255,255,255,0.6);
  z-index: 3;
  pointer-events: none;
}

/* çƒŸèŠ±ç”»å¸ƒ */
canvas {
  position: absolute;
  inset: 0;
  z-index: 2;
}
</style>
</head>

<body>

<div class="mask"></div>

<div class="text" id="textBox">
  <h1 id="title"></h1>
  <p id="content"></p>
</div>

<div class="tip" id="tip">âœ¨ è½»ç‚¹å±å¹•</div>

<canvas id="canvas"></canvas>

<div class="signature">â€” ä¸€ä¸ªåœ¨æƒ³ä½ çš„äºº</div>

<script>
/* ================= çƒŸèŠ±æ•ˆæœ ================= */
const canvas = document.getElementById("canvas");
const ctx = canvas.getContext("2d");

function resize() {
  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;
}
resize();
window.addEventListener("resize", resize);

const fireworks = [];

class Firework {
  constructor(x, y) {
    this.particles = [];
    for (let i = 0; i < 40; i++) {
      this.particles.push({
        x,
        y,
        angle: Math.random() * Math.PI * 2,
        speed: Math.random() * 4 + 2,
        alpha: 1
      });
    }
  }

  update() {
    this.particles.forEach(p => {
      p.x += Math.cos(p.angle) * p.speed;
      p.y += Math.sin(p.angle) * p.speed;
      p.alpha -= 0.02;
    });
  }

  draw() {
    this.particles.forEach(p => {
      ctx.beginPath();
      ctx.arc(p.x, p.y, 2, 0, Math.PI * 2);
      ctx.fillStyle = `rgba(255, ${200 + Math.random()*55}, 150, ${p.alpha})`;
      ctx.fill();
    });
  }
}

function animate() {
  ctx.clearRect(0, 0, canvas.width, canvas.height);
  fireworks.forEach((f, i) => {
    f.update();
    f.draw();
    if (f.particles[0].alpha <= 0) fireworks.splice(i, 1);
  });
  requestAnimationFrame(animate);
}
animate();

/* ================= æ‰“å­—æœºæ–‡å­— ================= */
const titleText = "ğŸ„ Merry Christmas, ææ…§";
const lines = [
  "ææ…§ï¼Œ",
  "å½“é›ªè½ä¸‹çš„æ—¶å€™ï¼Œ",
  "æˆ‘çªç„¶å¾ˆæƒ³æŠŠè¿™ä¸€åˆ»åˆ†ç»™ä½ ã€‚",
  "",
  "è¿™ä¸€å¹´æˆ–è®¸ä¸ç®—è½»æ¾ï¼Œ",
  "ä½†ä½ ä¾ç„¶æ¸©æŸ”ã€è®¤çœŸã€æ˜äº®ï¼Œ",
  "åƒå†¬å¤œé‡Œä¸€ç›ä¸å¼ æ‰¬çš„ç¯ã€‚",
  "",
  "å¦‚æœä¸–ç•Œæœ‰ä¸€ç‚¹å†·ï¼Œ",
  "å¸Œæœ›ä½ è¢«çˆ±åŒ…å›´ã€‚",
  "å¦‚æœçƒŸèŠ±å‡èµ·ï¼Œ",
  "å¸Œæœ›ä½ åˆšå¥½æŠ¬å¤´ã€‚"
];

let started = false;
let lineIndex = 0;
let charIndex = 0;

const textBox = document.getElementById("textBox");
const title = document.getElementById("title");
const content = document.getElementById("content");
const tip = document.getElementById("tip");

function typeTitle() {
  let i = 0;
  const timer = setInterval(() => {
    title.innerText += titleText[i];
    i++;
    if (i >= titleText.length) {
      clearInterval(timer);
      setTimeout(typeLine, 600);
    }
  }, 120);
}

function typeLine() {
  if (lineIndex >= lines.length) return;

  if (charIndex < lines[lineIndex].length) {
    content.innerHTML += lines[lineIndex][charIndex];
    charIndex++;
    setTimeout(typeLine, 120);
  } else {
    content.innerHTML += "<br/>";
    lineIndex++;
    charIndex = 0;
    setTimeout(typeLine, 500);
  }
}

/* ================= ç‚¹å‡»é€»è¾‘ï¼ˆä¸‰é˜¶æ®µï¼‰ ================= */
canvas.addEventListener("click", e => {
  if (!started) {
    started = true;
    textBox.classList.add("show");
    tip.innerText = "âœ¨ å†ç‚¹ä¸€ä¸‹ï¼Œä¸ºææ…§æ”¾çƒŸèŠ±";
    typeTitle();
  } else {
    fireworks.push(new Firework(e.clientX, e.clientY));
  }
});
</script>

</body>
</html>
